<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>move</title>
	<style>
     *{margin:0;padding:0;}
     body{background:#111;}
     div{width:100px;height:100px;background:#090;position:absolute;left:0;left:0;}
     input{position:absolute;top:0;right:0;}
	</style>
	<script>
         window.onload=function(){
         	var oDiv=document.querySelector('div');
         	var apos=[];
         	var timer=null;
         	var oBtn=document.querySelector('input');
         	oDiv.onmousedown=function(ev){
                  var oEvent=ev||event;
                  var disX=oEvent.clientX-oDiv.offsetLeft;
                  var disY=oEvent.clientY-oDiv.offsetTop;
                  apos.push({
                  		left:oDiv.offsetLeft,
                  		top:oDiv.offsetTop
                  	})
                  document.onmousemove=function(ev){
                  	var oEvent=ev||event;
                  	oDiv.style.left=oEvent.clientX-disX+'px';
                  	oDiv.style.top=oEvent.clientY-disY+'px';
                  	apos.push({
                  		left:oDiv.offsetLeft,
                  		top:oDiv.offsetTop
                  	})
                  };
                  document.onmouseup=function(){
                  	document.onmousemove=null;
                  	document.onmouseup=null;
                  	oDiv.releaseCapture&&oDiv.releaseCpature();
                  };
                  oDiv.setCapture&&oDiv.setCapture();
                  return false;
         	};
         	oBtn.onclick=function(){
         		timer=setInterval(function(){
                   var pp=apos.pop();
                   oDiv.style.left=pp.left+'px';
                   oDiv.style.top=pp.top+'px';
                   if(apos.length==0){
                   	clearInterval(timer)
                   }
         		},30);

         	};
         };
	</script>
</head>
<body>
	<div></div>
	<input type="button" value="回放">
</body>
</html>